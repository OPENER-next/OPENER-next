{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "OSM map feature collection",
  "description": "A list of OSM map feature templates, each with an additional visual and textual representation.",
  "type": "array",
  "items": {
    "type": "object",
    "description": "A map feature template.",
    "required": [ "name", "icon", "osm_tags", "osm_element" ],
    "additionalProperties": false,
    "properties": {
      "name": {
        "description": "A label describing this map feature.",
        "type": "string"
      },
      "icon": {
        "description": "The icon name/identifier from the custom icons map.",
        "type": "string"
      },
      "osm_tags": {
        "type": "object",
        "description": "A key value map of OSM tags that define that osm feature.",
        "additionalProperties": {
          "description": "If this is set to a boolean the corresponding osm tag either needs to exist or not independent of its value. An array means one of the given values must match the tag value.",
          "type": ["string", "boolean", "array"],
          "items": {
            "type": ["string", "boolean"]
          },
          "minItems": 1
        }
      },
      "osm_element": {
        "description": "A single OSM element or list of elements. An array means one of the given elements must match.",
        "anyOf": [
          {
            "$ref": "#/definitions/osm_element_type"
          },
          {
            "type": "array",
            "items": {
              "$ref": "#/definitions/osm_element_type"
            },
            "minItems": 1
          }
        ]
      }
    }
  },
  "definitions": {
    "osm_element_type": { "enum": ["Node", "OpenWay", "ClosedWay", "Relation"] }
  }
}
